# # Global variables are applied to all deployments and used as the default value of
# # the deployments if a specific deployment value is missing.
# # CPU: 20, Mem: 32 GB
global:
  user: "tidb"
  ssh_port: 22
  deploy_dir: "/home/tidb/tidb-deploy"
  data_dir: "/home/tidb/tidb-data"

# # Monitored variables are applied to all the machines.
monitored:
  node_exporter_port: 9100
  blackbox_exporter_port: 9115

server_configs:
  tidb:
    instance.tidb_slow_log_threshold: 1000

    # performance
    performance.txn-entry-size-limit: 62914560      # 60M
    performance.txn-total-size-limit: 1073741824    # 1G

    # schedule
    schedule.leader-schedule-limit: 8
    schedule.region-schedule-limit: 4096
    schedule.replica-schedule-limit: 128

  tikv:
    # server
    server.grpc-concurrency: 8

    # storage
    storage.block-cache.shared: true
    storage.block-cache.capacity: "512MB"

    # readpool
    readpool.storage.use-unified-pool: false
    readpool.coprocessor.use-unified-pool: true
    readpool.unified.max-thread-count: 15

    # raftstore
    raftstore.raft-entry-max-siz: "10MB"
    raftstore.capacity: "8GB"

  pd:
    replication.enable-placement-rules: true
    replication.location-labels: ["host"]
    replication.max-replicas: 1

  tiflash:
    logger.level: "info"

pd_servers:
  - host: 192.168.70.45
    client_port: 2379
    peer_port: 2080
    numa_node: "0"

  - host: 192.168.70.45
    client_port: 2380
    peer_port: 2081
    numa_node: "0"

  - host: 192.168.70.45
    client_port: 2381
    peer_port: 2082
    numa_node: "0"

tidb_servers:
  - host: 192.168.70.45
    port: 3306
    status_port: 10080
    numa_node: "0"

  - host: 192.168.70.45
    port: 3307
    status_port: 10090
    numa_node: "0"

  - host: 192.168.70.45
    port: 3308
    status_port: 10100
    numa_node: "0"

tikv_servers:
  - host: 192.168.70.45
    port: 20160
    status_port: 20180
    numa_node: "0"
    config:
      server.labels: { host: "logic-host-1" }

  - host: 192.168.70.45
    port: 20161
    status_port: 20181
    numa_node: "0"
    config:
      server.labels: { host: "logic-host-2" }

  - host: 192.168.70.45
    port: 20162
    status_port: 20183
    numa_node: "0"
    config:
      server.labels: { host: "logic-host-3" }

tiflash_servers:
  - host: 192.168.70.45

monitoring_servers:
  - host: 192.168.70.45
    port: 3090

grafana_servers:
  - host: 192.168.70.45
    port: 3091


