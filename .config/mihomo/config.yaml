# HTTP(S) å’Œ SOCKS ä»£ç†æ··åˆç«¯å£
mixed-port: 7890

# socks ä»£ç†ç«¯å£
socks-port: 7891

# å…è®¸å±€åŸŸç½‘è¿æ¥
allow-lan: true

# ç»‘å®š IP åœ°å€ï¼Œä»…ä½œç”¨äº allow-lan ä¸º trueï¼Œ'*'è¡¨ç¤ºæ‰€æœ‰åœ°å€
bind-address: "*"

# è§„åˆ™å¼•æ“
mode: rule

# Clash å†…æ ¸è¾“å‡ºæ—¥å¿—çš„ç­‰çº§
# silent é™é»˜ï¼Œä¸è¾“å‡º
# error ä»…è¾“å‡ºå‘ç”Ÿé”™è¯¯è‡³æ— æ³•ä½¿ç”¨çš„æ—¥å¿—
# warning è¾“å‡ºå‘ç”Ÿé”™è¯¯ä½†ä¸å½±å“è¿è¡Œçš„æ—¥å¿—ï¼Œä»¥åŠ error çº§åˆ«å†…å®¹
# info è¾“å‡ºä¸€èˆ¬è¿è¡Œçš„å†…å®¹ï¼Œä»¥åŠ error å’Œ warning çº§åˆ«çš„æ—¥å¿—
# debug å°½å¯èƒ½çš„è¾“å‡ºè¿è¡Œä¸­æ‰€æœ‰çš„ä¿¡æ¯
log-level: info

# å¼€å¯ IPv6 æ€»å¼€å…³ï¼Œå…³é—­é˜»æ–­æ‰€æœ‰ IPv6 é“¾æ¥å’Œå±è”½ DNS è¯·æ±‚ AAAA è®°å½•
ipv6: true

# æ§åˆ¶ Clash å‘å‡º TCP Keep Alive åŒ…çš„é—´éš”ï¼Œå‡å°‘ç§»åŠ¨è®¾å¤‡è€—ç”µé—®é¢˜çš„ä¸´æ—¶æªæ–½ã€‚
keep-alive-interval: 30

# æ§åˆ¶æ˜¯å¦è®© Clash å»åŒ¹é…è¿›ç¨‹
# always å¼€å¯ï¼Œå¼ºåˆ¶åŒ¹é…æ‰€æœ‰è¿›ç¨‹
# strict é»˜è®¤ï¼Œç”± Clash åˆ¤æ–­æ˜¯å¦å¼€å¯
# off ä¸åŒ¹é…è¿›ç¨‹ï¼Œæ¨èåœ¨è·¯ç”±å™¨ä¸Šä½¿ç”¨æ­¤æ¨¡å¼
find-process-mode: strict

# å¤–éƒ¨æ§åˆ¶å™¨ï¼Œå¯ä»¥ä½¿ç”¨ RESTful API æ¥æ§åˆ¶ä½ çš„ Clash å†…æ ¸
external-controller: 0.0.0.0:9090

# API çš„è®¿é—®å¯†é’¥
secret: ""

# å¯ä»¥å°†é™æ€ç½‘é¡µèµ„æº (æ¯”å¦‚ Clash-dashboard) è¿è¡Œåœ¨ Clash API, è·¯å¾„ä¸º API åœ°å€/ui
external-ui: ./dashboard/

# å¤–éƒ¨ç”¨æˆ·ç•Œé¢åå­—ï¼Œåˆå¹¶ä¸º external-ui/xd
# external-ui-name: xd

# å¤–éƒ¨ç”¨æˆ·ç•Œé¢ä¸‹è½½åœ°å€
external-ui-url: "https://github.com/MetaCubeX/metacubexd/archive/refs/heads/gh-pages.zip"

# ç¼“å­˜
profile:
  # å‚¨å­˜ API å¯¹ç­–ç•¥ç»„çš„é€‰æ‹©ï¼Œä»¥ä¾›ä¸‹æ¬¡å¯åŠ¨æ—¶ä½¿ç”¨
  store-selected: true
  # å‚¨å­˜ fakeip æ˜ å°„è¡¨ï¼ŒåŸŸåå†æ¬¡å‘ç”Ÿè¿æ¥æ—¶ï¼Œä½¿ç”¨åŸæœ‰æ˜ å°„åœ°å€
  store-fake-ip: true


# æ›´æ¢å»¶è¿Ÿè®¡ç®—æ–¹å¼ï¼Œå»é™¤æ¡æ‰‹ç­‰é¢å¤–å»¶è¿Ÿ
unified-delay: true

# TCP å¹¶å‘
tcp-concurrent: true

# å…¨å±€ TLS æŒ‡çº¹ï¼Œä¼˜å…ˆä½äº proxy å†…çš„ client-fingerprint
# ç›®å‰æ”¯æŒå¼€å¯ TLS ä¼ è¾“çš„ TCP/grpc/WS/HTTP , æ”¯æŒåè®®æœ‰ VLESS,Vmess å’Œ trojan
global-client-fingerprint: chrome

# æ›´æ”¹ geoip ä½¿ç”¨æ–‡ä»¶ï¼Œmmdb æˆ–è€… datï¼Œå¯é€‰ true/false,trueä¸º datï¼Œé»˜è®¤å€¼ false
geodata-mode: true 

# standardï¼šæ ‡å‡†åŠ è½½å™¨
# memconservativeï¼šä¸“ä¸ºå†…å­˜å—é™ (å°å†…å­˜) è®¾å¤‡ä¼˜åŒ–çš„åŠ è½½å™¨ (é»˜è®¤å€¼)
geodata-loader: memconservative

# è‡ªåŠ¨æ›´æ–° GEO
geo-auto-update: false

# æ›´æ–°é—´éš”ï¼Œå•ä½ä¸ºå°æ—¶
geo-update-interval: 24

# è‡ªå®š GEO ä¸‹è½½åœ°å€
geox-url:
  geoip: "https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geoip.dat"
  geosite: "https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geosite.dat"
  mmdb: "https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/country.mmdb"
  asn: "https://github.com/xishang0128/geoip/releases/download/latest/GeoLite2-ASN.mmdb"

# è‡ªå®šä¹‰å¤–éƒ¨èµ„æºä¸‹è½½æ—¶ä½¿ç”¨çš„çš„ UAï¼Œé»˜è®¤ä¸º clash.meta
global-ua: clash.meta

# hosts åŸŸåæ”¯æŒé€šé…ï¼Œä¾‹å¦‚ *.clash.devæˆ– +.example.comï¼Œåˆ«åä¸æ”¯æŒé€šé…
hosts:
  '*.clash.dev': 127.0.0.1
  'alpha.clash.dev': '::1'
  test.com: [1.1.1.1, 2.2.2.2]
  baidu.com: google.com

# DNS é…ç½®
dns:
  enable: false
  prefer-h3: true
  use-hosts: true
  use-system-hosts: true
  listen: 0.0.0.0:1053
  ipv6: true
  default-nameserver:
    - 223.5.5.5
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
    - '*.lan'
    - localhost.ptlogin2.qq.com
  nameserver-policy:
    'www.baidu.com': '114.114.114.114'
    '+.internal.crop.com': '10.0.0.1'
    'geosite:cn': https://doh.pub/dns-query
  nameserver:
    - https://doh.pub/dns-query
    - https://dns.alidns.com/dns-query
    - system
  fallback:
    - tls://8.8.4.4
    - tls://1.1.1.1
  proxy-server-nameserver:
    - https://doh.pub/dns-query
  fallback-filter:
    geoip: true
    geoip-code: CN
    geosite:
      - gfw
    ipcidr:
      - 240.0.0.0/4
    domain:
      - '+.google.com'
      - '+.facebook.com'
      - '+.youtube.com'

tun:
  enable: true
  stack: system
  auto-route: true
  auto-detect-interface: true

p: &p
  type: http
  interval: 3600
  health-check:
    enable: true
    url: https://www.gstatic.com/generate_204
    interval: 300

proxy-providers:
  hk:
    <<: *p
    url: http://127.0.0.1:3078/provider?re=%E9%A6%99%E6%B8%AF
    path: ./proxies/hk.yaml

proxy-groups:
  # - name: ğŸª Match
  #   type: url-test
  #   interval: 3600 
  #   url: http://www.gstatic.com/generate_204
  #   use:
  #     - caiyun
  #   proxies:
  #     - DIRECT
  - name: ğŸª Match
    type: select
    interval: 3600 
    url: http://www.gstatic.com/generate_204
    use:
      - hk
    proxies:
      - DIRECT

rule-providers:
  direct:
    type: file
    path: ./rules/direct.txt
    behavior: classical
    format: text

rules:
- DOMAIN,dl.google.com,ğŸª Match
- DOMAIN,leetcode.com,ğŸª Match
- DOMAIN,claude.ai,ğŸª Match
- DOMAIN-SUFFIX,googleapis.cn,ğŸª Match
- DOMAIN-SUFFIX,googleapis.com,ğŸª Match
- IP-CIDR,0.0.0.0/8,DIRECT,no-resolve
- IP-CIDR,10.0.0.0/8,DIRECT,no-resolve
- IP-CIDR,100.64.0.0/10,DIRECT,no-resolve
- IP-CIDR,127.0.0.0/8,DIRECT,no-resolve
- IP-CIDR,169.254.0.0/16,DIRECT,no-resolve
- IP-CIDR,172.16.0.0/12,DIRECT,no-resolve
- IP-CIDR,192.0.0.0/24,DIRECT,no-resolve
- IP-CIDR,192.0.2.0/24,DIRECT,no-resolve
- IP-CIDR,192.88.99.0/24,DIRECT,no-resolve
- IP-CIDR,192.168.0.0/16,DIRECT,no-resolve
- IP-CIDR,198.18.0.0/15,DIRECT,no-resolve
- IP-CIDR,198.51.100.0/24,DIRECT,no-resolve
- IP-CIDR,203.0.113.0/24,DIRECT,no-resolve
- IP-CIDR,224.0.0.0/3,DIRECT,no-resolve
- IP-CIDR,::/127,DIRECT,no-resolve
- IP-CIDR,fc00::/7,DIRECT,no-resolve
- IP-CIDR,fe80::/10,DIRECT,no-resolve
- IP-CIDR,ff00::/8,DIRECT,no-resolve
- RULE-SET,direct,DIRECT,no-resolve
- MATCH,ğŸª Match
